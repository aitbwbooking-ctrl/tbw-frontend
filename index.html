<!doctype html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <title>TBW AI PREMIUM â€“ Smart Travel, Navigation & Global Booking Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#000a12" />
  <link rel="icon" href="/assets/icons/icon_192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="/assets/icons/icon_512.png" />

  <link rel="stylesheet" href="/style.css" />
</head>
<body>

  <!-- INTRO (prikazuje se samo prvi put â€“ kontrola u app.js) -->
  <div id="introOverlay" class="intro">
    <canvas id="introCanvas"></canvas>
    <div class="intro-inner">
      <img src="/assets/TBW.png" alt="TBW Logo" class="intro-logo" />
      <div class="intro-title">TBW AI PREMIUM</div>
      <div class="intro-subtitle">Smart Travel, Navigation &amp; Global Booking Assistant</div>
      <button id="skipIntro" class="btn ghost">PreskoÄi intro</button>
    </div>
    <audio id="introAudio" src="/assets/sounds/intro.mp3" preload="auto"></audio>
  </div>

  <!-- COOKIE BANNER -->
  <div id="cookieBanner" class="cookie-banner">
    <div class="cookie-text">
      Ova aplikacija koristi kolaÄiÄ‡e za bolje iskustvo, sigurnost i AI funkcije.
    </div>
    <div class="cookie-btns">
      <button id="cookieAccept" class="btn accept">Prihvati</button>
      <button id="cookieReject" class="btn reject">Odbij</button>
    </div>
  </div>

  <!-- GORNJI FIKSNI DIO: TOPBAR + HEADER + SEARCH + VOICE BAR + STATUS -->

  <!-- TOP TICKER BAR -->
  <div id="topBar" class="topbar">
    <div class="topbar-inner">
      <div class="topbar-left">
        <span class="live-dot"></span>
        <span class="live-text">TBW LIVE</span>
      </div>
      <div class="topbar-ticker">
        <div id="tickerContent" class="ticker-content">
          UÄitavam obavijestiâ€¦
        </div>
      </div>
    </div>
  </div>

  <!-- HEADER / MAIN BRAND + LANGUAGE TOGGLE -->
  <header class="header">
    <div class="brand">
      <img src="/assets/TBW.png" alt="TBW" class="brand-logo" />
      <div class="brand-text">
        <h1>TBW AI PREMIUM</h1>
        <div class="brand-sub">
          Smart Travel, Navigation &amp; Global Booking Assistant
        </div>
      </div>
    </div>

    <div class="main-search">
      <!-- jeziÄni toggle (HR / EN â€“ logiku radi app.js) -->
      <button id="langToggle" class="btn ghost" title="Promijeni jezik">
        ğŸ‡­ğŸ‡· / ğŸ‡¬ğŸ‡§
      </button>
    </div>
  </header>

  <!-- GLOBALNA TRAÅ½ILICA + VOICE BAR -->
  <div style="padding: 0 14px 6px;">
    <div class="search-input-wrap">
      <input 
        id="globalSearch"
        type="text"
        placeholder="TraÅ¾iâ€¦"
        class="search-centered pulse-placeholder"
      />
      <button id="micBtn" class="icon-btn mic-idle" title="Glasovni unos ğŸ¤">
        ğŸ¤
      </button>
    </div>

    <!-- Voice Command Bar (pojavljuje se samo kad mikrofon sluÅ¡a) -->
    <div id="voiceBar" class="voice-bar hidden">
      SluÅ¡am vasâ€¦ recite naredbu (npr. "Å½elim do Splita", "Slobodni apartmani Zadar").
    </div>
  </div>

  <!-- STATUS STRIP -->
  <div class="status-strip">
    <span id="backendStatus" class="status-dot offline">Backend: provjeraâ€¦</span>
    <span id="geoStatus" class="status-dot">Lokacija: nepoznata</span>
  </div>

  <!-- GLAVNA MREÅ½A KARTICA (3 u redu, vertikalni scroll dozvoljen) -->
  <main class="grid">

    <!-- RED 1: NAVIGACIJA / BOOKING / STREET VIEW -->

    <!-- NAVIGACIJA -->
    <section class="card navigation">
      <h2 data-i18n="card.navigation">Navigacija â€“ TBW NAVI PRO MAX</h2>
      <div id="navMap" class="map"></div>
      <div class="row gap">
        <input id="routeFrom" class="input" placeholder="Od (prazno = moja lokacija)" />
        <input id="routeTo" class="input" placeholder="Do (adresa, grad, hotelâ€¦)" />
      </div>
      <div class="row gap" style="margin-top: 6px;">
        <button id="navGo" class="btn primary" data-i18n="btn.navGo">KRENI</button>
        <button id="navHud" class="btn ghost" data-i18n="btn.navHud">HUD naÄin</button>
        <button id="navExit" class="btn ghost danger" data-i18n="btn.navExit">Prekini</button>
      </div>
      <div class="row gap" style="margin-top: 4px;">
        <button id="navVoice" class="btn voice" data-i18n="btn.navVoice">
          Hey TBW â€“ govorni suvozaÄ
        </button>
      </div>
      <div id="navStatus" class="small-text"></div>
    </section>

    <!-- BOOKING / SMJEÅ TAJ -->
    <section class="card booking">
      <h2 data-i18n="card.booking">SmjeÅ¡taj &amp; putovanja</h2>
      <div class="row gap">
        <div class="col">
          <label data-i18n="label.destination">OdrediÅ¡te</label>
          <input id="hotelCity" class="input" placeholder="Split, Zadar, Zagrebâ€¦" />
        </div>
        <div class="col">
          <label data-i18n="label.checkin">Check-in</label>
          <input id="arrive" class="input" type="date" />
        </div>
        <div class="col">
          <label data-i18n="label.checkout">Check-out</label>
          <input id="depart" class="input" type="date" />
        </div>
        <div class="col">
          <label data-i18n="label.guests">Gosti</label>
          <input id="guests" class="input" type="number" min="1" value="2" />
        </div>
      </div>
      <div class="row between" style="margin-top: 6px;">
        <div class="tags small-text">
          <span>ğŸš˜ Parking</span><span>ğŸŒŠ Pogled na more</span><span>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Obiteljski</span>
        </div>
        <button id="bookBtn" class="btn secondary" data-i18n="btn.bookingSearch">
          PronaÄ‘i smjeÅ¡taj
        </button>
      </div>
      <div id="hotelResults" class="list small-text"></div>
    </section>

    <!-- STREET VIEW (pozicija gdje je prije bilo vrijeme) -->
    <section class="card streetview">
      <h2 data-i18n="card.streetview">TBW Street View</h2>
      <div id="streetView" class="street"></div>
      <div class="small-text" data-i18n="hint.streetview">
        Dodirnite za otvaranje prikaza u cijelom ekranu.
      </div>
    </section>

    <!-- RED 2: PROMET / SERVISI / VRIJEME -->

    <!-- PROMET UÅ½IVO -->
    <section class="card traffic">
      <h2 data-i18n="card.traffic">Promet uÅ¾ivo</h2>
      <div id="trafficMap" class="map small-map"></div>
      <div id="trafficInfo" class="small-text"></div>
    </section>

    <!-- SERVISI (benzinske, trgovine, vulkanizeri...) -->
    <section class="card services">
      <h2 data-i18n="card.services">Servisi &amp; trgovine</h2>
      <div id="servicesBox" class="list small-text">
        UÄitavam servise, trgovine i benzinskeâ€¦
      </div>
    </section>

    <!-- VRIJEME (sad na mjestu gdje je prije bilo stanje mora) -->
    <section class="card weather">
      <h2 data-i18n="card.weather">Vrijeme</h2>
      <div class="weather-widget">
        <canvas id="weatherAnim"></canvas>
        <div id="weatherInfo" class="weather-info">
          <div id="weatherLocation" class="weather-location">UÄitavam...</div>
          <div id="weatherTemp" class="weather-temp"></div>
          <div id="weatherDesc" class="weather-desc"></div>
          <div id="weatherExtra" class="weather-extra"></div>
        </div>
      </div>
    </section>

    <!-- RED 3: STANJE MORA & MARINE / JAVNI PRIJEVOZ / AERODROMI -->

    <!-- STANJE MORA + TRAJEKTI + MARINE -->
    <section class="card sea">
      <h2 data-i18n="card.sea">More &amp; trajekti</h2>
      <div id="seaBox" class="sea-box small-text">
        UÄitavam stanje mora, temperature i trajekteâ€¦
      </div>
    </section>

    <!-- JAVNI PRIJEVOZ -->
    <section class="card transit">
      <h2 data-i18n="card.transit">Javni prijevoz</h2>
      <div class="transit-widget">
        <div class="transit-line">
          <div class="transit-bus"></div>
        </div>
        <div id="transitInfo" class="transit-info">
          UÄitavam linije javnog prijevozaâ€¦
        </div>
      </div>
    </section>

    <!-- AERODROMI -->
    <section class="card airport">
      <h2 data-i18n="card.airport">Aerodromi</h2>
      <div class="airport-widget">
        <div class="airport-sky">
          <div class="airport-plane"></div>
          <div class="airport-cloud cloud-1"></div>
          <div class="airport-cloud cloud-2"></div>
        </div>
        <div id="airportInfo" class="airport-info">
          <div id="airportMain" class="airport-main">Letovi se uÄitavaju...</div>
          <div id="airportSub" class="airport-sub"></div>
        </div>
      </div>
    </section>

    <!-- RED 4: HITNE / RDS ALARM / AI ASISTENT -->

    <!-- HITNE SLUÅ½BE -->
    <section class="card emergency">
      <h2 data-i18n="card.emergency">Hitne sluÅ¾be</h2>
      <div class="emergency-widget">
        <div class="siren">
          <div class="siren-light"></div>
          <div class="siren-base"></div>
        </div>
        <div id="emergencyInfo" class="emergency-info">
          UÄitavam obliÅ¾nje hitne sluÅ¾beâ€¦
        </div>
      </div>
    </section>

    <!-- RDS ALARM -->
    <section class="card rds">
      <h2 data-i18n="card.rds">RDS alarm</h2>
      <div id="rdsWidget" class="rds-widget rds-normal">
        <div class="rds-icon">ğŸ“»</div>
        <div class="rds-text">
          <div id="rdsStatus" class="rds-status">Nema aktivnih RDS alarma.</div>
          <div id="rdsDetail" class="rds-detail"></div>
        </div>
      </div>
    </section>

    <!-- AI ASISTENT -->
    <section class="card full ai-chat">
      <h2 data-i18n="card.ai">TBW AI Asistent</h2>
      <div id="messages" class="messages"></div>
      <div class="chat-input-row">
        <input 
          id="assistantInput" 
          class="input" 
          placeholder="Pitaj bilo Å¡to: najbolje plaÅ¾e, skrivene lokacije, stanje na cestama, letoviâ€¦"
        />
        <button id="assistantVoice" class="icon-btn" title="Glasovni unos za AI">ğŸ¤</button>
        <button id="sendBtn" class="btn primary" data-i18n="btn.aiSend">PoÅ¡alji</button>
      </div>
    </section>

  </main>

  <!-- LEGAL CENTER MODAL -->
  <div id="legalModal" class="legal-modal">
    <div class="legal-modal-content">
      <span id="legalClose" class="legal-close">&times;</span>
      <h2>TBW AI PREMIUM â€“ Legal Center</h2>
      <p>Odaberite dokument:</p>
      <div class="legal-modal-links">
        <a href="/legal/terms.html" target="_blank">Uvjeti koriÅ¡tenja</a>
        <a href="/legal/privacy.html" target="_blank">Politika privatnosti</a>
        <a href="/legal/cookies.html" target="_blank">KolaÄiÄ‡i</a>
        <a href="/legal/disclaimer.html" target="_blank">Pravno odricanje odgovornosti</a>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="legal-footer">
    <div class="legal-links">
      <a href="#" id="openLegal">Legal Center</a>
    </div>
    <div class="legal-owner">
      Â© 2025 <strong>TBW AI PREMIUM</strong> â€“ Sva prava pridrÅ¾ana.<br />
      Smart Travel, Navigation &amp; Global Booking Assistant.<br />
      OsnivaÄ &amp; vlasnik: <strong>DraÅ¾en Halar</strong> â€“ <strong>ai.tbw.booking@gmail.com</strong>
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script src="/navi.js" defer></script>
  <script src="/app.js" defer></script>
</body>
</html>
