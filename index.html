<!doctype html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TBW AI PREMIUM</title>

  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#001a28" />
  <link rel="icon" href="/assets/icons/icon_192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="/assets/icons/icon_512.png" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <!-- Intro (5s) sa zvjezdicama + zvukom -->
  <div id="intro" class="intro hidden">
    <canvas id="stars"></canvas>
    <div class="intro-center">
      <img src="/assets/TBW.png" alt="TBW" class="intro-logo" />
      <div class="intro-title">TBW AI PREMIUM</div>
      <div class="intro-sub">Smart Concierge â€¢ Hrvatska</div>
      <button id="skipIntro" class="btn ghost">PreskoÄi</button>
    </div>
    <audio id="introAudio" src="/assets/sounds/intro.mp3" preload="auto"></audio>
  </div>

  <!-- Top upozorenja (fiksno) -->
  <div id="topbar" class="topbar">
    <div class="topbar-inner">
      <strong>TBW LIVE</strong>
      <span class="live-dot"></span>
      <span id="ticker" class="ticker">UÄitavam upozorenjaâ€¦</span>
    </div>
  </div>

  <!-- Header (fiksno) -->
  <header class="header">
    <div class="brand">
      <img src="/assets/TBW.png" alt="TBW" />
      <h1>TBW AI PREMIUM <span class="badge">LIVE</span></h1>
    </div>
    <div class="search">
      <input id="q" type="text" placeholder="Split apartmani / Zadar plaÅ¾e / 'Ruta Karlovac â€“ Zagreb'â€¦" />
      <button id="micBtn" class="icon" title="Govor"><svg viewBox="0 0 24 24"><path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3Zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2Zm-5 7v3h-2v-3h2Z"/></svg></button>
      <button id="searchBtn" class="btn">TraÅ¾i</button>
      <span id="backendDot" class="dot" title="Backend status"></span>
    </div>
  </header>

  <!-- Glavni grid (kompaktni manji prozori, samo vertikalni scroll) -->
  <main class="grid">
    <!-- 1. red -->
    <section class="card" id="card-nav">
      <h2>Navigacija</h2>
      <div id="navMap" class="map"></div>
      <div class="row gap mt">
        <input id="routeFrom" class="input" placeholder="PolaziÅ¡te (opcionalno)" />
        <input id="routeTo" class="input" placeholder="OdrediÅ¡te" />
        <button id="routeBtn" class="btn sm">Rutu</button>
      </div>
      <div class="chipbar">
        <button class="chip" data-layer="speedcams">Radar</button>
        <button class="chip" data-layer="incidents">NesreÄ‡e</button>
        <button class="chip" data-layer="works">Radovi</button>
        <button class="chip" data-layer="parking">Parking</button>
        <button class="chip" data-layer="ev">PunjaÄnice</button>
        <button class="chip" data-layer="shops">Trgovine</button>
        <button class="chip" data-layer="hospitals">Bolnice</button>
      </div>
    </section>

    <section class="card" id="card-book">
      <h2>Rezervacija smjeÅ¡taja</h2>
      <div class="row gap">
        <div class="col">
          <label>Lokacija</label>
          <input id="hotelCity" class="input" placeholder="Split" />
        </div>
        <div class="col">
          <label>Dolazak</label>
          <input id="arrive" class="input" type="date" />
        </div>
        <div class="col">
          <label>Odlazak</label>
          <input id="depart" class="input" type="date" />
        </div>
      </div>
      <div class="row between mt">
        <div class="chipbar">
          <span class="chip toggle" data-tag="parking">ğŸš˜ Parking</span>
          <span class="chip toggle" data-tag="breakfast">ğŸ³ DoruÄak</span>
          <span class="chip toggle" data-tag="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Obitelj</span>
        </div>
        <div class="row gap">
          <button id="bookSearch" class="btn">PretraÅ¾i</button>
          <button id="bookReserve" class="btn ok">Rezerviraj</button>
          <button id="bookCancel" class="btn danger">OtkaÅ¾i</button>
        </div>
      </div>
      <div id="hotelResults" class="list mt"></div>
    </section>

    <section class="card" id="card-street">
      <h2>Street View</h2>
      <div id="streetView" class="street"></div>
    </section>

    <!-- 2. red -->
    <section class="card" id="card-weather">
      <h2>Vrijeme â€¢ more â€¢ zrak</h2>
      <div id="weatherBox" class="weather"></div>
    </section>

    <section class="card" id="card-traffic">
      <h2>Promet uÅ¾ivo</h2>
      <div id="trafficMap" class="map"></div>
    </section>

    <section class="card" id="card-photos">
      <h2>Fotografije</h2>
      <div id="photoStrip" class="photos"></div>
    </section>

    <!-- 3. red -->
    <section class="card" id="card-poi">
      <h2>Znamenitosti</h2>
      <div id="poiBox" class="poi"></div>
    </section>

    <section class="card" id="card-mini">
      <h2>Karta (pregled)</h2>
      <div id="miniMap" class="map"></div>
    </section>

    <section class="card" id="card-services">
      <h2>Dostupni servisi & hitne sluÅ¾be</h2>
      <div id="servicesBox" class="list"></div>
    </section>
  </main>

  <!-- Footer sigurnost -->
  <footer class="site-foot">
    <div class="shields">
      <span>ğŸ” TLS 1.3</span>
      <span>ğŸ›¡ï¸ CSP</span>
      <span>ğŸ“± PWA</span>
      <span>â±ï¸ Rate-limit</span>
    </div>
    <small>Â© 2025 TBW AI PREMIUM â€” Sva prava pridrÅ¾ana.</small>
  </footer>

  <script src="/app.js" defer></script>
</body>
</html>
